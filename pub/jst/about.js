var About;

About = {
  jobs: false,
  hsbpdInterval: false,
  hsbpdSection: 'holistic',
  cache: {},
  i: function() {
    _.off('.orbit');
    About.cache.hsbpd = $('.hsbpd');
    About.cache.blocks = $('.blocks');
    About.cache.blocksp = $('.blocksp');
    About.handlers();
    if (location.hash !== "") {
      return About.menu(location.hash.replace('#', ''));
    }
  },
  handlers: function() {
    if ($(window).width() > 1000) {
      $('.hsbpd > .dots > .dot').on('click', About.hsbpdHandler);
    }
    $('.capcenter > .capmenu > .cap').on('click', About.capcenter);
    $('.fived > .fivedmenu > .item').on('click', About.fived);
    $('.about > .fcontainer > .filters > .inner > .filtermenu > .filter').on('click', About.menuHandler);
    $('.about > .sections > .section_careers').on('click', '.jobs > .job', About.jobHandler);
    if ($(window).width() > 1000) {
      About.hsbpdInterval = setInterval(function() {
        return About.hsbpdCheck();
      }, 10);
    }
    $('.profiles > .profile').on('click', About.profile);
    return $('.bios > .bio > .close, .bios > .bio').on('click', About.profileClose);
  },
  profile: function() {
    var bio, pos, profile, rect, t, width;
    t = $(this);
    profile = t.data('profile');
    rect = t[0].getBoundingClientRect();
    pos = t.position();
    width = $(window).innerWidth();
    About.profileClose();
    _.on($('.bios'));
    _.on(t);
    bio = $(".bios > .bio.bio_" + profile);
    bio.css('height', rect.height + "px");
    bio.css('top', (pos.top + rect.height) + "px");
    bio.css('left', 0);
    bio.css('right', 0);
    bio.css('width', '100%');
    if (width > (rect.width * 2)) {
      if (width === Math.round(rect.right)) {
        bio.css('width', (rect.width * 2) + "px");
        bio.css('right', "0px");
        bio.css('left', "auto");
      } else if (rect.left === 0) {
        bio.css('width', (rect.width * 2) + "px");
        bio.css('left', "0px");
        bio.css('right', "auto");
      } else {
        bio.css('width', (rect.width * 2) + "px");
        bio.css('left', pos.left + "px");
        bio.css('right', "auto");
      }
    }
    if ($(window).width() < 1000) {
      bio.css('height', "auto");
    }
    _.on(bio);
    return $('html, body').animate({
      scrollTop: t.offset().top - 64
    }, 200);
  },
  profileClose: function() {
    _.off($('.bios'));
    _.off($('.bios > .bio'));
    return _.off($('.profiles > .profile'));
  },
  menuHandler: function() {
    var section;
    section = $(this).html().trim();
    return About.menu(section);
  },
  menu: function(section) {
    location.hash = section;
    if (section === 'careers' && About.jobs === false) {
      Loader.load('https://api.greenhouse.io/v1/boards/astrostudios/embed/jobs?callback=About.joblist');
    }
    _.off('.about > .fcontainer > .filters > .inner > .filtermenu > .filter', '.sections > .section');
    _.on(".fcontainer > .filters > .inner > .filtermenu > .filter.filter_" + section, ".sections > .section.section_" + section);
    if ($(window).width() > 1000) {
      return $('html, body').animate({
        scrollTop: $(".sections").offset().top - 60
      }, 1000);
    } else {
      return $('html, body').animate({
        scrollTop: $(".sections").offset().top - 322
      }, 300);
    }
  },
  hsbpdCheck: function() {
    var b, i, j, len, results, section, sections, st, t, threshold, top;
    st = $(window).scrollTop();
    top = 1386;
    threshold = 631;
    if (st >= top && !About.cache.hsbpd.hasClass('fixed')) {
      About.cache.hsbpd.addClass('fixed').removeClass('bottom');
      About.cache.blocks.addClass('fixed');
      About.cache.blocksp.removeClass('off').addClass('on');
    }
    if (st < top && About.cache.hsbpd.hasClass('fixed')) {
      About.cache.hsbpd.removeClass('fixed').removeClass('bottom');
      About.cache.blocks.removeClass('fixed');
      About.cache.blocksp.removeClass('on').addClass('off');
    }
    if (st >= (top + (threshold * 5))) {
      About.cache.hsbpd.removeClass('fixed').addClass('bottom');
    }
    if (st < top) {
      return true;
    }
    sections = ['holistic', 'strategy', 'brand', 'product', 'digital'];
    results = [];
    for (i = j = 0, len = sections.length; j < len; i = ++j) {
      section = sections[i];
      t = top + ((i + 0) * threshold);
      b = top + ((i + 1) * threshold);
      if (st > t && st < b && About.hsbpdSection !== section) {
        results.push(About.hsbpd(section));
      } else {
        results.push(void 0);
      }
    }
    return results;
  },
  hsbpdHandler: function() {
    var section;
    section = $(this).data('section');
    return About.hsbpd(section);
  },
  hsbpd: function(section) {
    About.hsbpdSection = section;
    $('.hsbpd > .slide.on').addClass('offing').removeClass('on');
    _.on(".hsbpd > .slide.slide_" + section[0]);
    setTimeout(function() {
      _.off('.hsbpd > .slide.offing');
      return $('.hsbpd > .slide.offing').removeClass('offing');
    }, 3000);
    _.off('.hsbpd > .dots > .dot');
    return _.on(".hsbpd > .dots > .dot_" + section);
  },
  capcenter: function() {
    var cap;
    cap = $(this).html().trim();
    _.off('.capcenter > .capmenu > .cap', '.capcenter > .descs > .desc');
    return _.on(this, ".capcenter > .descs > .desc_" + cap);
  },
  fived: function() {
    var item;
    item = $(this).find('.copy > .name').html().trim();
    _.off('.fived > .fivedmenu > .item', '.fived > .bodys > .body');
    return _.on(this, ".fived > .bodys > .body_" + item);
  },
  jobHandler: function() {
    var t;
    t = $(this);
    if (t.hasClass('on')) {
      return _.off(t);
    }
    _.off('.about > .sections > .section_careers > .jobs > .job');
    return _.on(this);
  },
  joblist: function(data) {
    var count, j, job, len, ref, results, total;
    About.jobs = {};
    total = Object.keys(data.jobs).length;
    count = 0;
    ref = data.jobs;
    results = [];
    for (j = 0, len = ref.length; j < len; j++) {
      job = ref[j];
      results.push($.ajax({
        url: "https://api.greenhouse.io/v1/boards/astrostudios/embed/job?id=" + job.id + "?callback=About.job",
        type: 'GET',
        dataType: 'jsonp',
        crossDomain: true,
        jsonpCallback: 'About.job',
        complete: function(response) {
          count++;
          if (count === total) {
            return About.jobulate();
          }
        }
      }));
    }
    return results;
  },
  job: function(job) {
    return About.jobs[job.id] = job;
  },
  jobulate: function() {
    var apply, content, el, id, job, jobsEl, ref, results;
    jobsEl = $('.jobs');
    ref = About.jobs;
    results = [];
    for (id in ref) {
      job = ref[id];
      el = $("<div class='job off'><div class='title'>" + job.title + "</div><div class='content'></div></div>");
      content = el.find('.content');
      content.html($('<div/>').html(job.content).text());
      apply = $("<a href='" + job.absolute_url + "' target='_new' class='apply'>Apply Now</a>");
      content.append(apply);
      results.push(jobsEl.append(el));
    }
    return results;
  }
};

//# sourceMappingURL=data:application/json;base64,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QUEsQ0FBRSxXQUFBLEdBQVksR0FBRyxDQUFDLFlBQWhCLEdBQTZCLDZDQUEvQjtNQUNSLE9BQU8sQ0FBQyxNQUFSLENBQWUsS0FBZjttQkFDQSxNQUFNLENBQUMsTUFBUCxDQUFjLEVBQWQ7QUFORjs7RUFIUSxDQTdNViIsImZpbGUiOiJhYm91dC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIkFib3V0ID1cbiAgam9iczogZmFsc2VcbiAgaHNicGRJbnRlcnZhbDogZmFsc2VcbiAgaHNicGRTZWN0aW9uOiAnaG9saXN0aWMnXG4gIGNhY2hlOiB7fVxuXG4gIGk6IC0+XG5cbiAgICBfLm9mZiAnLm9yYml0J1xuXG4gICAgQWJvdXQuY2FjaGUuaHNicGQgPSAkKCcuaHNicGQnKVxuICAgIEFib3V0LmNhY2hlLmJsb2NrcyA9ICQoJy5ibG9ja3MnKVxuICAgIEFib3V0LmNhY2hlLmJsb2Nrc3AgPSAkKCcuYmxvY2tzcCcpXG5cbiAgICBBYm91dC5oYW5kbGVycygpXG5cbiAgICBpZiBsb2NhdGlvbi5oYXNoIGlzbnQgXCJcIlxuICAgICAgQWJvdXQubWVudSBsb2NhdGlvbi5oYXNoLnJlcGxhY2UoJyMnLCcnKVxuXG4gIGhhbmRsZXJzOiAtPlxuXG4gICAgaWYgJCh3aW5kb3cpLndpZHRoKCkgPiAxMDAwXG4gICAgICAkKCcuaHNicGQgPiAuZG90cyA+IC5kb3QnKS5vbiAnY2xpY2snLCBBYm91dC5oc2JwZEhhbmRsZXJcblxuICAgICQoJy5jYXBjZW50ZXIgPiAuY2FwbWVudSA+IC5jYXAnKS5vbiAnY2xpY2snLCBBYm91dC5jYXBjZW50ZXJcbiAgICAkKCcuZml2ZWQgPiAuZml2ZWRtZW51ID4gLml0ZW0nKS5vbiAnY2xpY2snLCBBYm91dC5maXZlZFxuXG4gICAgJCgnLmFib3V0ID4gLmZjb250YWluZXIgPiAuZmlsdGVycyA+IC5pbm5lciA+IC5maWx0ZXJtZW51ID4gLmZpbHRlcicpLm9uICdjbGljaycsIEFib3V0Lm1lbnVIYW5kbGVyXG4gICAgJCgnLmFib3V0ID4gLnNlY3Rpb25zID4gLnNlY3Rpb25fY2FyZWVycycpLm9uICdjbGljaycsICcuam9icyA+IC5qb2InLCBBYm91dC5qb2JIYW5kbGVyXG5cbiAgICBpZiAkKHdpbmRvdykud2lkdGgoKSA+IDEwMDBcbiAgICAgIEFib3V0LmhzYnBkSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCAtPlxuICAgICAgICBBYm91dC5oc2JwZENoZWNrKClcbiAgICAgICwgMTBcblxuICAgICQoJy5wcm9maWxlcyA+IC5wcm9maWxlJykub24gJ2NsaWNrJywgQWJvdXQucHJvZmlsZVxuICAgICQoJy5iaW9zID4gLmJpbyA+IC5jbG9zZSwgLmJpb3MgPiAuYmlvJykub24gJ2NsaWNrJywgQWJvdXQucHJvZmlsZUNsb3NlXG5cbiAgcHJvZmlsZTogLT5cblxuICAgIHQgPSAkIHRoaXNcbiAgICBwcm9maWxlID0gdC5kYXRhICdwcm9maWxlJ1xuICAgIHJlY3QgPSB0WzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgcG9zID0gdC5wb3NpdGlvbigpXG4gICAgd2lkdGggPSAkKHdpbmRvdykuaW5uZXJXaWR0aCgpXG5cbiAgICBBYm91dC5wcm9maWxlQ2xvc2UoKVxuICAgIF8ub24gJCgnLmJpb3MnKVxuICAgIF8ub24gdFxuICAgIGJpbyA9ICQoXCIuYmlvcyA+IC5iaW8uYmlvXyN7cHJvZmlsZX1cIilcblxuICAgIGJpby5jc3MoJ2hlaWdodCcsIFwiI3tyZWN0LmhlaWdodH1weFwiKVxuICAgIGJpby5jc3MoJ3RvcCcsIFwiI3twb3MudG9wICsgcmVjdC5oZWlnaHR9cHhcIilcblxuICAgIGJpby5jc3MoJ2xlZnQnLCAwKVxuICAgIGJpby5jc3MoJ3JpZ2h0JywgMClcbiAgICBiaW8uY3NzKCd3aWR0aCcsICcxMDAlJylcblxuICAgIGlmIHdpZHRoID4gKHJlY3Qud2lkdGgqMilcblxuICAgICAgaWYgd2lkdGggaXMgTWF0aC5yb3VuZChyZWN0LnJpZ2h0KVxuICAgICAgICBiaW8uY3NzKCd3aWR0aCcsIFwiI3tyZWN0LndpZHRoKjJ9cHhcIilcbiAgICAgICAgYmlvLmNzcygncmlnaHQnLCBcIjBweFwiKVxuICAgICAgICBiaW8uY3NzKCdsZWZ0JywgXCJhdXRvXCIpXG4gICAgICBlbHNlIGlmIHJlY3QubGVmdCBpcyAwXG4gICAgICAgIGJpby5jc3MoJ3dpZHRoJywgXCIje3JlY3Qud2lkdGgqMn1weFwiKVxuICAgICAgICBiaW8uY3NzKCdsZWZ0JywgXCIwcHhcIilcbiAgICAgICAgYmlvLmNzcygncmlnaHQnLCBcImF1dG9cIilcbiAgICAgIGVsc2VcbiAgICAgICAgYmlvLmNzcygnd2lkdGgnLCBcIiN7cmVjdC53aWR0aCoyfXB4XCIpXG4gICAgICAgIGJpby5jc3MoJ2xlZnQnLCBcIiN7cG9zLmxlZnR9cHhcIilcbiAgICAgICAgYmlvLmNzcygncmlnaHQnLCBcImF1dG9cIilcblxuICAgIGlmICQod2luZG93KS53aWR0aCgpIDwgMTAwMFxuICAgICAgYmlvLmNzcygnaGVpZ2h0JywgXCJhdXRvXCIpXG5cbiAgICBfLm9uIGJpb1xuXG4gICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoXG4gICAgICBzY3JvbGxUb3A6IHQub2Zmc2V0KCkudG9wIC0gNjRcbiAgICAsIDIwMClcblxuICBwcm9maWxlQ2xvc2U6IC0+XG5cbiAgICBfLm9mZiAkKCcuYmlvcycpXG4gICAgXy5vZmYgJCgnLmJpb3MgPiAuYmlvJylcbiAgICBfLm9mZiAkKCcucHJvZmlsZXMgPiAucHJvZmlsZScpXG5cbiAgbWVudUhhbmRsZXI6IC0+XG4gICAgc2VjdGlvbiA9ICQodGhpcykuaHRtbCgpLnRyaW0oKVxuICAgIEFib3V0Lm1lbnUgc2VjdGlvblxuXG4gIG1lbnU6IChzZWN0aW9uKSAtPlxuXG4gICAgbG9jYXRpb24uaGFzaCA9IHNlY3Rpb25cblxuICAgIGlmIHNlY3Rpb24gaXMgJ2NhcmVlcnMnIGFuZCBBYm91dC5qb2JzIGlzIGZhbHNlXG4gICAgICBMb2FkZXIubG9hZCAnaHR0cHM6Ly9hcGkuZ3JlZW5ob3VzZS5pby92MS9ib2FyZHMvYXN0cm9zdHVkaW9zL2VtYmVkL2pvYnM/Y2FsbGJhY2s9QWJvdXQuam9ibGlzdCdcblxuXG4gICAgXy5vZmYgJy5hYm91dCA+IC5mY29udGFpbmVyID4gLmZpbHRlcnMgPiAuaW5uZXIgPiAuZmlsdGVybWVudSA+IC5maWx0ZXInLCAnLnNlY3Rpb25zID4gLnNlY3Rpb24nXG4gICAgXy5vbiBcIi5mY29udGFpbmVyID4gLmZpbHRlcnMgPiAuaW5uZXIgPiAuZmlsdGVybWVudSA+IC5maWx0ZXIuZmlsdGVyXyN7c2VjdGlvbn1cIixcbiAgICAgIFwiLnNlY3Rpb25zID4gLnNlY3Rpb24uc2VjdGlvbl8je3NlY3Rpb259XCJcblxuICAgIGlmICQod2luZG93KS53aWR0aCgpID4gMTAwMFxuICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoXG4gICAgICAgIHNjcm9sbFRvcDogJChcIi5zZWN0aW9uc1wiKS5vZmZzZXQoKS50b3AgLSA2MFxuICAgICAgLCAxMDAwKVxuICAgIGVsc2VcbiAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKFxuICAgICAgICBzY3JvbGxUb3A6ICQoXCIuc2VjdGlvbnNcIikub2Zmc2V0KCkudG9wIC0gMzIyXG4gICAgICAsIDMwMClcblxuICBoc2JwZENoZWNrOiAtPlxuXG4gICAgc3QgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKClcblxuICAgIHRvcCA9IDEzODZcbiAgICB0aHJlc2hvbGQgPSA2MzFcblxuICAgIGlmIHN0ID49IHRvcCBhbmQgIUFib3V0LmNhY2hlLmhzYnBkLmhhc0NsYXNzICdmaXhlZCdcbiAgICAgIEFib3V0LmNhY2hlLmhzYnBkLmFkZENsYXNzKCdmaXhlZCcpLnJlbW92ZUNsYXNzICdib3R0b20nXG4gICAgICBBYm91dC5jYWNoZS5ibG9ja3MuYWRkQ2xhc3MoJ2ZpeGVkJylcbiAgICAgIEFib3V0LmNhY2hlLmJsb2Nrc3AucmVtb3ZlQ2xhc3MoJ29mZicpLmFkZENsYXNzKCdvbicpXG4gICAgaWYgc3QgPCB0b3AgYW5kIEFib3V0LmNhY2hlLmhzYnBkLmhhc0NsYXNzICdmaXhlZCdcbiAgICAgIEFib3V0LmNhY2hlLmhzYnBkLnJlbW92ZUNsYXNzKCdmaXhlZCcpLnJlbW92ZUNsYXNzICdib3R0b20nXG4gICAgICBBYm91dC5jYWNoZS5ibG9ja3MucmVtb3ZlQ2xhc3MoJ2ZpeGVkJylcbiAgICAgIEFib3V0LmNhY2hlLmJsb2Nrc3AucmVtb3ZlQ2xhc3MoJ29uJykuYWRkQ2xhc3MoJ29mZicpXG4gICAgaWYgc3QgPj0gKHRvcCArICh0aHJlc2hvbGQqNSkpXG4gICAgICBBYm91dC5jYWNoZS5oc2JwZC5yZW1vdmVDbGFzcygnZml4ZWQnKS5hZGRDbGFzcyAnYm90dG9tJ1xuXG4gICAgaWYgc3QgPCB0b3BcbiAgICAgIHJldHVybiB0cnVlXG5cbiAgICBzZWN0aW9ucyA9IFsnaG9saXN0aWMnLCdzdHJhdGVneScsJ2JyYW5kJywncHJvZHVjdCcsJ2RpZ2l0YWwnXVxuICAgIGZvciBzZWN0aW9uLCBpIGluIHNlY3Rpb25zXG4gICAgICB0ID0gdG9wICsgKCAoaSswKSAqIHRocmVzaG9sZCApXG4gICAgICBiID0gdG9wICsgKCAoaSsxKSAqIHRocmVzaG9sZCApXG5cbiAgICAgIGlmIHN0ID4gdCBhbmQgc3QgPCBiIGFuZCBBYm91dC5oc2JwZFNlY3Rpb24gaXNudCBzZWN0aW9uXG4gICAgICAgIEFib3V0LmhzYnBkIHNlY3Rpb25cblxuICBoc2JwZEhhbmRsZXI6IC0+XG4gICAgc2VjdGlvbiA9ICQodGhpcykuZGF0YSAnc2VjdGlvbidcbiAgICBBYm91dC5oc2JwZCBzZWN0aW9uXG5cbiAgaHNicGQ6IChzZWN0aW9uKSAtPlxuXG4gICAgQWJvdXQuaHNicGRTZWN0aW9uID0gc2VjdGlvblxuXG4gICAgJCgnLmhzYnBkID4gLnNsaWRlLm9uJykuYWRkQ2xhc3MoJ29mZmluZycpLnJlbW92ZUNsYXNzKCdvbicpXG5cbiAgICBfLm9uIFwiLmhzYnBkID4gLnNsaWRlLnNsaWRlXyN7c2VjdGlvblswXX1cIlxuXG4gICAgc2V0VGltZW91dCAtPlxuICAgICAgXy5vZmYgJy5oc2JwZCA+IC5zbGlkZS5vZmZpbmcnXG4gICAgICAkKCcuaHNicGQgPiAuc2xpZGUub2ZmaW5nJykucmVtb3ZlQ2xhc3MoJ29mZmluZycpXG4gICAgLCAzMDAwXG5cbiAgICBfLm9mZiAnLmhzYnBkID4gLmRvdHMgPiAuZG90J1xuICAgIF8ub24gXCIuaHNicGQgPiAuZG90cyA+IC5kb3RfI3tzZWN0aW9ufVwiXG5cbiAgY2FwY2VudGVyOiAtPlxuXG4gICAgY2FwID0gJCh0aGlzKS5odG1sKCkudHJpbSgpXG4gICAgXy5vZmYgJy5jYXBjZW50ZXIgPiAuY2FwbWVudSA+IC5jYXAnLCAnLmNhcGNlbnRlciA+IC5kZXNjcyA+IC5kZXNjJ1xuICAgIF8ub24gdGhpcywgXCIuY2FwY2VudGVyID4gLmRlc2NzID4gLmRlc2NfI3tjYXB9XCJcblxuICBmaXZlZDogLT5cblxuICAgIGl0ZW0gPSAkKHRoaXMpLmZpbmQoJy5jb3B5ID4gLm5hbWUnKS5odG1sKCkudHJpbSgpXG4gICAgXy5vZmYgJy5maXZlZCA+IC5maXZlZG1lbnUgPiAuaXRlbScsICcuZml2ZWQgPiAuYm9keXMgPiAuYm9keSdcbiAgICBfLm9uIHRoaXMsIFwiLmZpdmVkID4gLmJvZHlzID4gLmJvZHlfI3tpdGVtfVwiXG5cblxuICBqb2JIYW5kbGVyOiAtPlxuXG4gICAgdCA9ICQgdGhpc1xuXG4gICAgaWYgdC5oYXNDbGFzcyAnb24nXG4gICAgICByZXR1cm4gXy5vZmYgdFxuXG4gICAgXy5vZmYgJy5hYm91dCA+IC5zZWN0aW9ucyA+IC5zZWN0aW9uX2NhcmVlcnMgPiAuam9icyA+IC5qb2InXG4gICAgXy5vbiB0aGlzXG5cbiAgam9ibGlzdDogKGRhdGEpIC0+XG5cbiAgICBBYm91dC5qb2JzID0ge31cblxuICAgIHRvdGFsID0gT2JqZWN0LmtleXMoZGF0YS5qb2JzKS5sZW5ndGhcbiAgICBjb3VudCA9IDBcblxuICAgIGZvciBqb2IgaW4gZGF0YS5qb2JzXG4gICAgICAkLmFqYXhcbiAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmdyZWVuaG91c2UuaW8vdjEvYm9hcmRzL2FzdHJvc3R1ZGlvcy9lbWJlZC9qb2I/aWQ9I3tqb2IuaWR9P2NhbGxiYWNrPUFib3V0LmpvYlwiXG4gICAgICAgIHR5cGU6ICdHRVQnXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbnAnXG4gICAgICAgIGNyb3NzRG9tYWluOiB0cnVlXG4gICAgICAgIGpzb25wQ2FsbGJhY2s6ICdBYm91dC5qb2InXG4gICAgICAgIGNvbXBsZXRlOiAocmVzcG9uc2UpIC0+XG4gICAgICAgICAgY291bnQrK1xuICAgICAgICAgIEFib3V0LmpvYnVsYXRlKCkgaWYgY291bnQgaXMgdG90YWxcblxuICBqb2I6IChqb2IpIC0+XG4gICAgQWJvdXQuam9ic1tqb2IuaWRdID0gam9iXG5cbiAgam9idWxhdGU6IC0+XG4gICAgam9ic0VsID0gJCAnLmpvYnMnXG5cbiAgICBmb3IgaWQsIGpvYiBvZiBBYm91dC5qb2JzXG4gICAgICBlbCA9ICQoXCI8ZGl2IGNsYXNzPSdqb2Igb2ZmJz48ZGl2IGNsYXNzPSd0aXRsZSc+I3tqb2IudGl0bGV9PC9kaXY+PGRpdiBjbGFzcz0nY29udGVudCc+PC9kaXY+PC9kaXY+XCIpXG4gICAgICBjb250ZW50ID0gZWwuZmluZCAnLmNvbnRlbnQnXG4gICAgICBjb250ZW50Lmh0bWwgJCgnPGRpdi8+JykuaHRtbChqb2IuY29udGVudCkudGV4dCgpXG4gICAgICBhcHBseSA9ICQoXCI8YSBocmVmPScje2pvYi5hYnNvbHV0ZV91cmx9JyB0YXJnZXQ9J19uZXcnIGNsYXNzPSdhcHBseSc+QXBwbHkgTm93PC9hPlwiKVxuICAgICAgY29udGVudC5hcHBlbmQgYXBwbHlcbiAgICAgIGpvYnNFbC5hcHBlbmQgZWxcblxuXG5cbiJdfQ==
