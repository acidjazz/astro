var About;

About = {
  jobs: false,
  hsbpdInterval: false,
  hsbpdSection: 'holistic',
  cache: {},
  i: function() {
    _.off('.orbit');
    dbar.d();
    About.cache.hsbpd = $('.hsbpd');
    About.cache.blocks = $('.blocks');
    About.cache.blocksp = $('.blocksp');
    About.handlers();
    if (location.hash !== "") {
      return About.menu(location.hash.replace('#', ''));
    }
  },
  handlers: function() {
    if ($(window).width() > 1000) {
      $('.hsbpd > .dots > .dot').on('click', About.hsbpdHandler);
    }
    $('.capcenter > .capmenu > .cap').on('click', About.capcenter);
    $('.fived > .fivedmenu > .item').on('click', About.fived);
    $('.about > .fcontainer > .filters > .inner > .filtermenu > .filter, .info.emails > a.p').on('click', About.menuHandler);
    $('.about > .sections > .section_careers').on('click', '.jobs > .job', About.jobHandler);
    if ($(window).width() > 1000) {
      About.hsbpdInterval = setInterval(function() {
        return About.hsbpdCheck();
      }, 10);
    }
    $('.profiles > .profile').on('click', About.profile);
    return $('.bios > .bio > .close, .bios > .bio').on('click', About.profileClose);
  },
  profile: function() {
    var bio, pos, profile, rect, t, width;
    t = $(this);
    profile = t.data('profile');
    rect = t[0].getBoundingClientRect();
    pos = t.position();
    width = $(window).innerWidth();
    About.profileClose();
    _.on($('.bios'));
    _.on(t);
    bio = $(".bios > .bio.bio_" + profile);
    bio.css('height', rect.height + "px");
    bio.css('top', (pos.top + rect.height) + "px");
    bio.css('left', 0);
    bio.css('right', 0);
    bio.css('width', '100%');
    if (width > (rect.width * 2)) {
      if (width === Math.round(rect.right)) {
        bio.css('width', (rect.width * 2) + "px");
        bio.css('right', "0px");
        bio.css('left', "auto");
      } else if (rect.left === 0) {
        bio.css('width', (rect.width * 2) + "px");
        bio.css('left', "0px");
        bio.css('right', "auto");
      } else {
        bio.css('width', (rect.width * 2) + "px");
        bio.css('left', pos.left + "px");
        bio.css('right', "auto");
      }
    }
    if ($(window).width() < 1000) {
      bio.css('height', "auto");
    }
    _.on(bio);
    return $('html, body').animate({
      scrollTop: t.offset().top - 64
    }, 200);
  },
  profileClose: function() {
    _.off($('.bios'));
    _.off($('.bios > .bio'));
    return _.off($('.profiles > .profile'));
  },
  menuHandler: function() {
    var section;
    section = $(this).data('filter');
    return About.menu(section);
  },
  menu: function(section) {
    location.hash = section;
    if (section === 'careers' && About.jobs === false) {
      Loader.load('https://api.greenhouse.io/v1/boards/astrostudios/embed/jobs?callback=About.joblist');
    }
    _.off('.about > .fcontainer > .filters > .inner > .filtermenu > .filter', '.sections > .section');
    _.on(".fcontainer > .filters > .inner > .filtermenu > .filter.filter_" + section, ".sections > .section.section_" + section);
    if ($(window).width() > 1000) {
      return $('html, body').animate({
        scrollTop: $(".sections").offset().top - 60
      }, 1000);
    } else {
      return $('html, body').animate({
        scrollTop: $(".sections").offset().top - 322
      }, 300);
    }
  },
  hsbpdCheck: function() {
    var b, i, j, len, results, section, sections, st, t, threshold, top;
    st = $(window).scrollTop();
    top = 1386;
    threshold = 631;
    if (st >= top && !About.cache.hsbpd.hasClass('fixed')) {
      About.cache.hsbpd.addClass('fixed').removeClass('bottom');
      About.cache.blocks.addClass('fixed');
      About.cache.blocksp.removeClass('off').addClass('on');
    }
    if (st < top && About.cache.hsbpd.hasClass('fixed')) {
      About.cache.hsbpd.removeClass('fixed').removeClass('bottom');
      About.cache.blocks.removeClass('fixed');
      About.cache.blocksp.removeClass('on').addClass('off');
    }
    if (st >= (top + (threshold * 5))) {
      About.cache.hsbpd.removeClass('fixed').addClass('bottom');
    }
    if (st < top) {
      return true;
    }
    sections = ['holistic', 'strategy', 'brand', 'product', 'digital'];
    results = [];
    for (i = j = 0, len = sections.length; j < len; i = ++j) {
      section = sections[i];
      t = top + ((i + 0) * threshold);
      b = top + ((i + 1) * threshold);
      if (st > t && st < b && About.hsbpdSection !== section) {
        results.push(About.hsbpd(section));
      } else {
        results.push(void 0);
      }
    }
    return results;
  },
  hsbpdHandler: function() {
    var section;
    section = $(this).data('section');
    return About.hsbpd(section);
  },
  hsbpd: function(section) {
    About.hsbpdSection = section;
    $('.hsbpd > .slide.on').addClass('offing').removeClass('on');
    _.on(".hsbpd > .slide.slide_" + section[0]);
    setTimeout(function() {
      _.off('.hsbpd > .slide.offing');
      return $('.hsbpd > .slide.offing').removeClass('offing');
    }, 3000);
    _.off('.hsbpd > .dots > .dot');
    return _.on(".hsbpd > .dots > .dot_" + section);
  },
  capcenter: function() {
    var cap;
    cap = $(this).html().trim();
    _.off('.capcenter > .capmenu > .cap', '.capcenter > .descs > .desc');
    return _.on(this, ".capcenter > .descs > .desc_" + cap);
  },
  fived: function() {
    var item;
    item = $(this).find('.copy > .name').html().trim();
    _.off('.fived > .fivedmenu > .item', '.fived > .bodys > .body');
    return _.on(this, ".fived > .bodys > .body_" + item);
  },
  jobHandler: function() {
    var t;
    t = $(this);
    if (t.hasClass('on')) {
      return _.off(t);
    }
    _.off('.about > .sections > .section_careers > .jobs > .job');
    return _.on(this);
  },
  joblist: function(data) {
    var count, j, job, len, ref, results, total;
    About.jobs = {};
    total = Object.keys(data.jobs).length;
    count = 0;
    ref = data.jobs;
    results = [];
    for (j = 0, len = ref.length; j < len; j++) {
      job = ref[j];
      results.push($.ajax({
        url: "https://api.greenhouse.io/v1/boards/astrostudios/embed/job?id=" + job.id + "?callback=About.job",
        type: 'GET',
        dataType: 'jsonp',
        crossDomain: true,
        jsonpCallback: 'About.job',
        complete: function(response) {
          count++;
          if (count === total) {
            return About.jobulate();
          }
        }
      }));
    }
    return results;
  },
  job: function(job) {
    return About.jobs[job.id] = job;
  },
  jobulate: function() {
    var apply, content, el, id, job, jobsEl, ref, results;
    jobsEl = $('.jobs');
    ref = About.jobs;
    results = [];
    for (id in ref) {
      job = ref[id];
      el = $("<div class='job off'><div class='title'>" + job.title + "</div><div class='content'></div></div>");
      content = el.find('.content');
      content.html($('<div/>').html(job.content).text());
      apply = $("<a href='" + job.absolute_url + "' target='_new' class='apply'>Apply Now</a>");
      content.append(apply);
      results.push(jobsEl.append(el));
    }
    return results;
  }
};

//# sourceMappingURL=data:application/json;base64,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LEdBQVEsQ0FBQSxDQUFFLFdBQUEsR0FBWSxHQUFHLENBQUMsWUFBaEIsR0FBNkIsNkNBQS9CO01BQ1IsT0FBTyxDQUFDLE1BQVIsQ0FBZSxLQUFmO21CQUNBLE1BQU0sQ0FBQyxNQUFQLENBQWMsRUFBZDtBQU5GOztFQUhRLENBL01WIiwiZmlsZSI6ImFib3V0LmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiQWJvdXQgPVxuICBqb2JzOiBmYWxzZVxuICBoc2JwZEludGVydmFsOiBmYWxzZVxuICBoc2JwZFNlY3Rpb246ICdob2xpc3RpYydcbiAgY2FjaGU6IHt9XG5cbiAgaTogLT5cblxuICAgIF8ub2ZmICcub3JiaXQnXG4gICAgZGJhci5kKClcblxuICAgIEFib3V0LmNhY2hlLmhzYnBkID0gJCAnLmhzYnBkJ1xuICAgIEFib3V0LmNhY2hlLmJsb2NrcyA9ICQgJy5ibG9ja3MnXG4gICAgQWJvdXQuY2FjaGUuYmxvY2tzcCA9ICQgJy5ibG9ja3NwJ1xuXG4gICAgQWJvdXQuaGFuZGxlcnMoKVxuXG4gICAgaWYgbG9jYXRpb24uaGFzaCBpc250IFwiXCJcbiAgICAgIEFib3V0Lm1lbnUgbG9jYXRpb24uaGFzaC5yZXBsYWNlICcjJywnJ1xuXG4gIGhhbmRsZXJzOiAtPlxuXG4gICAgaWYgJCh3aW5kb3cpLndpZHRoKCkgPiAxMDAwXG4gICAgICAkKCcuaHNicGQgPiAuZG90cyA+IC5kb3QnKS5vbiAnY2xpY2snLCBBYm91dC5oc2JwZEhhbmRsZXJcblxuICAgICQoJy5jYXBjZW50ZXIgPiAuY2FwbWVudSA+IC5jYXAnKS5vbiAnY2xpY2snLCBBYm91dC5jYXBjZW50ZXJcbiAgICAkKCcuZml2ZWQgPiAuZml2ZWRtZW51ID4gLml0ZW0nKS5vbiAnY2xpY2snLCBBYm91dC5maXZlZFxuXG4gICAgJCgnLmFib3V0ID4gLmZjb250YWluZXIgPiAuZmlsdGVycyA+IC5pbm5lciA+IC5maWx0ZXJtZW51ID4gLmZpbHRlciwgLmluZm8uZW1haWxzID4gYS5wJykub24gJ2NsaWNrJyxcbiAgICAgIEFib3V0Lm1lbnVIYW5kbGVyXG4gICAgJCgnLmFib3V0ID4gLnNlY3Rpb25zID4gLnNlY3Rpb25fY2FyZWVycycpLm9uICdjbGljaycsICcuam9icyA+IC5qb2InLCBBYm91dC5qb2JIYW5kbGVyXG5cbiAgICBpZiAkKHdpbmRvdykud2lkdGgoKSA+IDEwMDBcbiAgICAgIEFib3V0LmhzYnBkSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCAtPlxuICAgICAgICBBYm91dC5oc2JwZENoZWNrKClcbiAgICAgICwgMTBcblxuICAgICQoJy5wcm9maWxlcyA+IC5wcm9maWxlJykub24gJ2NsaWNrJywgQWJvdXQucHJvZmlsZVxuICAgICQoJy5iaW9zID4gLmJpbyA+IC5jbG9zZSwgLmJpb3MgPiAuYmlvJykub24gJ2NsaWNrJywgQWJvdXQucHJvZmlsZUNsb3NlXG5cbiAgcHJvZmlsZTogLT5cblxuICAgIHQgPSAkIHRoaXNcbiAgICBwcm9maWxlID0gdC5kYXRhICdwcm9maWxlJ1xuICAgIHJlY3QgPSB0WzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgcG9zID0gdC5wb3NpdGlvbigpXG4gICAgd2lkdGggPSAkKHdpbmRvdykuaW5uZXJXaWR0aCgpXG5cbiAgICBBYm91dC5wcm9maWxlQ2xvc2UoKVxuICAgIF8ub24gJCgnLmJpb3MnKVxuICAgIF8ub24gdFxuICAgIGJpbyA9ICQoXCIuYmlvcyA+IC5iaW8uYmlvXyN7cHJvZmlsZX1cIilcblxuICAgIGJpby5jc3MoJ2hlaWdodCcsIFwiI3tyZWN0LmhlaWdodH1weFwiKVxuICAgIGJpby5jc3MoJ3RvcCcsIFwiI3twb3MudG9wICsgcmVjdC5oZWlnaHR9cHhcIilcblxuICAgIGJpby5jc3MoJ2xlZnQnLCAwKVxuICAgIGJpby5jc3MoJ3JpZ2h0JywgMClcbiAgICBiaW8uY3NzKCd3aWR0aCcsICcxMDAlJylcblxuICAgIGlmIHdpZHRoID4gKHJlY3Qud2lkdGgqMilcblxuICAgICAgaWYgd2lkdGggaXMgTWF0aC5yb3VuZChyZWN0LnJpZ2h0KVxuICAgICAgICBiaW8uY3NzKCd3aWR0aCcsIFwiI3tyZWN0LndpZHRoKjJ9cHhcIilcbiAgICAgICAgYmlvLmNzcygncmlnaHQnLCBcIjBweFwiKVxuICAgICAgICBiaW8uY3NzKCdsZWZ0JywgXCJhdXRvXCIpXG4gICAgICBlbHNlIGlmIHJlY3QubGVmdCBpcyAwXG4gICAgICAgIGJpby5jc3MoJ3dpZHRoJywgXCIje3JlY3Qud2lkdGgqMn1weFwiKVxuICAgICAgICBiaW8uY3NzKCdsZWZ0JywgXCIwcHhcIilcbiAgICAgICAgYmlvLmNzcygncmlnaHQnLCBcImF1dG9cIilcbiAgICAgIGVsc2VcbiAgICAgICAgYmlvLmNzcygnd2lkdGgnLCBcIiN7cmVjdC53aWR0aCoyfXB4XCIpXG4gICAgICAgIGJpby5jc3MoJ2xlZnQnLCBcIiN7cG9zLmxlZnR9cHhcIilcbiAgICAgICAgYmlvLmNzcygncmlnaHQnLCBcImF1dG9cIilcblxuICAgIGlmICQod2luZG93KS53aWR0aCgpIDwgMTAwMFxuICAgICAgYmlvLmNzcygnaGVpZ2h0JywgXCJhdXRvXCIpXG5cbiAgICBfLm9uIGJpb1xuXG4gICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoXG4gICAgICBzY3JvbGxUb3A6IHQub2Zmc2V0KCkudG9wIC0gNjRcbiAgICAsIDIwMClcblxuICBwcm9maWxlQ2xvc2U6IC0+XG5cbiAgICBfLm9mZiAkKCcuYmlvcycpXG4gICAgXy5vZmYgJCgnLmJpb3MgPiAuYmlvJylcbiAgICBfLm9mZiAkKCcucHJvZmlsZXMgPiAucHJvZmlsZScpXG5cbiAgbWVudUhhbmRsZXI6IC0+XG4gICAgc2VjdGlvbiA9ICQodGhpcykuZGF0YSAnZmlsdGVyJ1xuICAgIEFib3V0Lm1lbnUgc2VjdGlvblxuXG4gIG1lbnU6IChzZWN0aW9uKSAtPlxuXG4gICAgbG9jYXRpb24uaGFzaCA9IHNlY3Rpb25cblxuICAgIGlmIHNlY3Rpb24gaXMgJ2NhcmVlcnMnIGFuZCBBYm91dC5qb2JzIGlzIGZhbHNlXG4gICAgICBMb2FkZXIubG9hZCAnaHR0cHM6Ly9hcGkuZ3JlZW5ob3VzZS5pby92MS9ib2FyZHMvYXN0cm9zdHVkaW9zL2VtYmVkL2pvYnM/Y2FsbGJhY2s9QWJvdXQuam9ibGlzdCdcblxuXG4gICAgXy5vZmYgJy5hYm91dCA+IC5mY29udGFpbmVyID4gLmZpbHRlcnMgPiAuaW5uZXIgPiAuZmlsdGVybWVudSA+IC5maWx0ZXInLCAnLnNlY3Rpb25zID4gLnNlY3Rpb24nXG4gICAgXy5vbiBcIi5mY29udGFpbmVyID4gLmZpbHRlcnMgPiAuaW5uZXIgPiAuZmlsdGVybWVudSA+IC5maWx0ZXIuZmlsdGVyXyN7c2VjdGlvbn1cIixcbiAgICAgIFwiLnNlY3Rpb25zID4gLnNlY3Rpb24uc2VjdGlvbl8je3NlY3Rpb259XCJcblxuICAgIGlmICQod2luZG93KS53aWR0aCgpID4gMTAwMFxuICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoXG4gICAgICAgIHNjcm9sbFRvcDogJChcIi5zZWN0aW9uc1wiKS5vZmZzZXQoKS50b3AgLSA2MFxuICAgICAgLCAxMDAwKVxuICAgIGVsc2VcbiAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKFxuICAgICAgICBzY3JvbGxUb3A6ICQoXCIuc2VjdGlvbnNcIikub2Zmc2V0KCkudG9wIC0gMzIyXG4gICAgICAsIDMwMClcblxuICBoc2JwZENoZWNrOiAtPlxuXG4gICAgc3QgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKClcblxuICAgIHRvcCA9IDEzODZcbiAgICB0aHJlc2hvbGQgPSA2MzFcblxuICAgIGlmIHN0ID49IHRvcCBhbmQgIUFib3V0LmNhY2hlLmhzYnBkLmhhc0NsYXNzICdmaXhlZCdcbiAgICAgIEFib3V0LmNhY2hlLmhzYnBkLmFkZENsYXNzKCdmaXhlZCcpLnJlbW92ZUNsYXNzICdib3R0b20nXG4gICAgICBBYm91dC5jYWNoZS5ibG9ja3MuYWRkQ2xhc3MoJ2ZpeGVkJylcbiAgICAgIEFib3V0LmNhY2hlLmJsb2Nrc3AucmVtb3ZlQ2xhc3MoJ29mZicpLmFkZENsYXNzKCdvbicpXG4gICAgaWYgc3QgPCB0b3AgYW5kIEFib3V0LmNhY2hlLmhzYnBkLmhhc0NsYXNzICdmaXhlZCdcbiAgICAgIEFib3V0LmNhY2hlLmhzYnBkLnJlbW92ZUNsYXNzKCdmaXhlZCcpLnJlbW92ZUNsYXNzICdib3R0b20nXG4gICAgICBBYm91dC5jYWNoZS5ibG9ja3MucmVtb3ZlQ2xhc3MoJ2ZpeGVkJylcbiAgICAgIEFib3V0LmNhY2hlLmJsb2Nrc3AucmVtb3ZlQ2xhc3MoJ29uJykuYWRkQ2xhc3MoJ29mZicpXG4gICAgaWYgc3QgPj0gKHRvcCArICh0aHJlc2hvbGQqNSkpXG4gICAgICBBYm91dC5jYWNoZS5oc2JwZC5yZW1vdmVDbGFzcygnZml4ZWQnKS5hZGRDbGFzcyAnYm90dG9tJ1xuXG4gICAgaWYgc3QgPCB0b3BcbiAgICAgIHJldHVybiB0cnVlXG5cbiAgICBzZWN0aW9ucyA9IFsnaG9saXN0aWMnLCdzdHJhdGVneScsJ2JyYW5kJywncHJvZHVjdCcsJ2RpZ2l0YWwnXVxuICAgIGZvciBzZWN0aW9uLCBpIGluIHNlY3Rpb25zXG4gICAgICB0ID0gdG9wICsgKCAoaSswKSAqIHRocmVzaG9sZCApXG4gICAgICBiID0gdG9wICsgKCAoaSsxKSAqIHRocmVzaG9sZCApXG5cbiAgICAgIGlmIHN0ID4gdCBhbmQgc3QgPCBiIGFuZCBBYm91dC5oc2JwZFNlY3Rpb24gaXNudCBzZWN0aW9uXG4gICAgICAgIEFib3V0LmhzYnBkIHNlY3Rpb25cblxuICBoc2JwZEhhbmRsZXI6IC0+XG4gICAgc2VjdGlvbiA9ICQodGhpcykuZGF0YSAnc2VjdGlvbidcbiAgICBBYm91dC5oc2JwZCBzZWN0aW9uXG5cbiAgaHNicGQ6IChzZWN0aW9uKSAtPlxuXG4gICAgQWJvdXQuaHNicGRTZWN0aW9uID0gc2VjdGlvblxuXG4gICAgJCgnLmhzYnBkID4gLnNsaWRlLm9uJykuYWRkQ2xhc3MoJ29mZmluZycpLnJlbW92ZUNsYXNzKCdvbicpXG5cbiAgICBfLm9uIFwiLmhzYnBkID4gLnNsaWRlLnNsaWRlXyN7c2VjdGlvblswXX1cIlxuXG4gICAgc2V0VGltZW91dCAtPlxuICAgICAgXy5vZmYgJy5oc2JwZCA+IC5zbGlkZS5vZmZpbmcnXG4gICAgICAkKCcuaHNicGQgPiAuc2xpZGUub2ZmaW5nJykucmVtb3ZlQ2xhc3MoJ29mZmluZycpXG4gICAgLCAzMDAwXG5cbiAgICBfLm9mZiAnLmhzYnBkID4gLmRvdHMgPiAuZG90J1xuICAgIF8ub24gXCIuaHNicGQgPiAuZG90cyA+IC5kb3RfI3tzZWN0aW9ufVwiXG5cbiAgY2FwY2VudGVyOiAtPlxuXG4gICAgY2FwID0gJCh0aGlzKS5odG1sKCkudHJpbSgpXG4gICAgXy5vZmYgJy5jYXBjZW50ZXIgPiAuY2FwbWVudSA+IC5jYXAnLCAnLmNhcGNlbnRlciA+IC5kZXNjcyA+IC5kZXNjJ1xuICAgIF8ub24gdGhpcywgXCIuY2FwY2VudGVyID4gLmRlc2NzID4gLmRlc2NfI3tjYXB9XCJcblxuICBmaXZlZDogLT5cblxuICAgIGl0ZW0gPSAkKHRoaXMpLmZpbmQoJy5jb3B5ID4gLm5hbWUnKS5odG1sKCkudHJpbSgpXG4gICAgXy5vZmYgJy5maXZlZCA+IC5maXZlZG1lbnUgPiAuaXRlbScsICcuZml2ZWQgPiAuYm9keXMgPiAuYm9keSdcbiAgICBfLm9uIHRoaXMsIFwiLmZpdmVkID4gLmJvZHlzID4gLmJvZHlfI3tpdGVtfVwiXG5cblxuICBqb2JIYW5kbGVyOiAtPlxuXG4gICAgdCA9ICQgdGhpc1xuXG4gICAgaWYgdC5oYXNDbGFzcyAnb24nXG4gICAgICByZXR1cm4gXy5vZmYgdFxuXG4gICAgXy5vZmYgJy5hYm91dCA+IC5zZWN0aW9ucyA+IC5zZWN0aW9uX2NhcmVlcnMgPiAuam9icyA+IC5qb2InXG4gICAgXy5vbiB0aGlzXG5cbiAgam9ibGlzdDogKGRhdGEpIC0+XG5cbiAgICBBYm91dC5qb2JzID0ge31cblxuICAgIHRvdGFsID0gT2JqZWN0LmtleXMoZGF0YS5qb2JzKS5sZW5ndGhcbiAgICBjb3VudCA9IDBcblxuICAgIGZvciBqb2IgaW4gZGF0YS5qb2JzXG4gICAgICAkLmFqYXhcbiAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBpLmdyZWVuaG91c2UuaW8vdjEvYm9hcmRzL2FzdHJvc3R1ZGlvcy9lbWJlZC9qb2I/aWQ9I3tqb2IuaWR9P2NhbGxiYWNrPUFib3V0LmpvYlwiXG4gICAgICAgIHR5cGU6ICdHRVQnXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbnAnXG4gICAgICAgIGNyb3NzRG9tYWluOiB0cnVlXG4gICAgICAgIGpzb25wQ2FsbGJhY2s6ICdBYm91dC5qb2InXG4gICAgICAgIGNvbXBsZXRlOiAocmVzcG9uc2UpIC0+XG4gICAgICAgICAgY291bnQrK1xuICAgICAgICAgIEFib3V0LmpvYnVsYXRlKCkgaWYgY291bnQgaXMgdG90YWxcblxuICBqb2I6IChqb2IpIC0+XG4gICAgQWJvdXQuam9ic1tqb2IuaWRdID0gam9iXG5cbiAgam9idWxhdGU6IC0+XG4gICAgam9ic0VsID0gJCAnLmpvYnMnXG5cbiAgICBmb3IgaWQsIGpvYiBvZiBBYm91dC5qb2JzXG4gICAgICBlbCA9ICQoXCI8ZGl2IGNsYXNzPSdqb2Igb2ZmJz48ZGl2IGNsYXNzPSd0aXRsZSc+I3tqb2IudGl0bGV9PC9kaXY+PGRpdiBjbGFzcz0nY29udGVudCc+PC9kaXY+PC9kaXY+XCIpXG4gICAgICBjb250ZW50ID0gZWwuZmluZCAnLmNvbnRlbnQnXG4gICAgICBjb250ZW50Lmh0bWwgJCgnPGRpdi8+JykuaHRtbChqb2IuY29udGVudCkudGV4dCgpXG4gICAgICBhcHBseSA9ICQoXCI8YSBocmVmPScje2pvYi5hYnNvbHV0ZV91cmx9JyB0YXJnZXQ9J19uZXcnIGNsYXNzPSdhcHBseSc+QXBwbHkgTm93PC9hPlwiKVxuICAgICAgY29udGVudC5hcHBlbmQgYXBwbHlcbiAgICAgIGpvYnNFbC5hcHBlbmQgZWxcblxuXG5cbiJdfQ==
