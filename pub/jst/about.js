var About;

About = {
  jobs: false,
  hsbpdInterval: false,
  hsbpdSection: 'holistic',
  cache: {},
  i: function() {
    _.off('.orbit');
    About.cache.hsbpd = $('.hsbpd');
    About.cache.blocks = $('.blocks');
    About.cache.blocksp = $('.blocksp');
    About.handlers();
    if (location.hash !== "") {
      return About.menu(location.hash.replace('#', ''));
    }
  },
  handlers: function() {
    if ($(window).width() > 1000) {
      $('.hsbpd > .dots > .dot').on('click', About.hsbpdHandler);
    }
    $('.capcenter > .capmenu > .cap').on('click', About.capcenter);
    $('.fived > .fivedmenu > .item').on('click', About.fived);
    $('.about > .fcontainer > .filters > .inner > .filtermenu > .filter, .info.emails > a.p').on('click', About.menuHandler);
    $('.about > .sections > .section_careers').on('click', '.jobs > .job', About.jobHandler);
    if ($(window).width() > 1000) {
      About.hsbpdInterval = setInterval(function() {
        return About.hsbpdCheck();
      }, 10);
    }
    $('.profiles > .profile').on('click', About.profile);
    return $('.bios > .bio > .close, .bios > .bio').on('click', About.profileClose);
  },
  profile: function() {
    var bio, pos, profile, rect, t, width;
    t = $(this);
    profile = t.data('profile');
    rect = t[0].getBoundingClientRect();
    pos = t.position();
    width = $(window).innerWidth();
    About.profileClose();
    _.on($('.bios'));
    _.on(t);
    bio = $(".bios > .bio.bio_" + profile);
    bio.css('height', rect.height + "px");
    bio.css('top', (pos.top + rect.height) + "px");
    bio.css('left', 0);
    bio.css('right', 0);
    bio.css('width', '100%');
    if (width > (rect.width * 2)) {
      if (width === Math.round(rect.right)) {
        bio.css('width', (rect.width * 2) + "px");
        bio.css('right', "0px");
        bio.css('left', "auto");
      } else if (rect.left === 0) {
        bio.css('width', (rect.width * 2) + "px");
        bio.css('left', "0px");
        bio.css('right', "auto");
      } else {
        bio.css('width', (rect.width * 2) + "px");
        bio.css('left', pos.left + "px");
        bio.css('right', "auto");
      }
    }
    if ($(window).width() < 1000) {
      bio.css('height', "auto");
    }
    _.on(bio);
    return $('html, body').animate({
      scrollTop: t.offset().top - 64
    }, 200);
  },
  profileClose: function() {
    _.off($('.bios'));
    _.off($('.bios > .bio'));
    return _.off($('.profiles > .profile'));
  },
  menuHandler: function() {
    var section;
    section = $(this).data('filter');
    return About.menu(section);
  },
  menu: function(section) {
    location.hash = section;
    if (section === 'careers' && About.jobs === false) {
      Loader.load('https://api.greenhouse.io/v1/boards/astrostudios/embed/jobs?callback=About.joblist');
    }
    _.off('.about > .fcontainer > .filters > .inner > .filtermenu > .filter', '.sections > .section');
    _.on(".fcontainer > .filters > .inner > .filtermenu > .filter.filter_" + section, ".sections > .section.section_" + section);
    if ($(window).width() > 1000) {
      return $('html, body').animate({
        scrollTop: $(".sections").offset().top - 60
      }, 1000);
    } else {
      return $('html, body').animate({
        scrollTop: $(".sections").offset().top - 322
      }, 300);
    }
  },
  hsbpdCheck: function() {
    var b, i, j, len, results, section, sections, st, t, threshold, top;
    st = $(window).scrollTop();
    top = 1386;
    threshold = 631;
    if (st >= top && !About.cache.hsbpd.hasClass('fixed')) {
      About.cache.hsbpd.addClass('fixed').removeClass('bottom');
      About.cache.blocks.addClass('fixed');
      About.cache.blocksp.removeClass('off').addClass('on');
    }
    if (st < top && About.cache.hsbpd.hasClass('fixed')) {
      About.cache.hsbpd.removeClass('fixed').removeClass('bottom');
      About.cache.blocks.removeClass('fixed');
      About.cache.blocksp.removeClass('on').addClass('off');
    }
    if (st >= (top + (threshold * 5))) {
      About.cache.hsbpd.removeClass('fixed').addClass('bottom');
    }
    if (st < top) {
      return true;
    }
    sections = ['holistic', 'strategy', 'brand', 'product', 'digital'];
    results = [];
    for (i = j = 0, len = sections.length; j < len; i = ++j) {
      section = sections[i];
      t = top + ((i + 0) * threshold);
      b = top + ((i + 1) * threshold);
      if (st > t && st < b && About.hsbpdSection !== section) {
        results.push(About.hsbpd(section));
      } else {
        results.push(void 0);
      }
    }
    return results;
  },
  hsbpdHandler: function() {
    var section;
    section = $(this).data('section');
    return About.hsbpd(section);
  },
  hsbpd: function(section) {
    About.hsbpdSection = section;
    $('.hsbpd > .slide.on').addClass('offing').removeClass('on');
    _.on(".hsbpd > .slide.slide_" + section[0]);
    setTimeout(function() {
      _.off('.hsbpd > .slide.offing');
      return $('.hsbpd > .slide.offing').removeClass('offing');
    }, 3000);
    _.off('.hsbpd > .dots > .dot');
    return _.on(".hsbpd > .dots > .dot_" + section);
  },
  capcenter: function() {
    var cap;
    cap = $(this).html().trim();
    _.off('.capcenter > .capmenu > .cap', '.capcenter > .descs > .desc');
    return _.on(this, ".capcenter > .descs > .desc_" + cap);
  },
  fived: function() {
    var item;
    item = $(this).find('.copy > .name').html().trim();
    _.off('.fived > .fivedmenu > .item', '.fived > .bodys > .body');
    return _.on(this, ".fived > .bodys > .body_" + item);
  },
  jobHandler: function() {
    var t;
    t = $(this);
    if (t.hasClass('on')) {
      return _.off(t);
    }
    _.off('.about > .sections > .section_careers > .jobs > .job');
    return _.on(this);
  },
  joblist: function(data) {
    var count, j, job, len, ref, results, total;
    About.jobs = {};
    total = Object.keys(data.jobs).length;
    count = 0;
    ref = data.jobs;
    results = [];
    for (j = 0, len = ref.length; j < len; j++) {
      job = ref[j];
      results.push($.ajax({
        url: "https://api.greenhouse.io/v1/boards/astrostudios/embed/job?id=" + job.id + "?callback=About.job",
        type: 'GET',
        dataType: 'jsonp',
        crossDomain: true,
        jsonpCallback: 'About.job',
        complete: function(response) {
          count++;
          if (count === total) {
            return About.jobulate();
          }
        }
      }));
    }
    return results;
  },
  job: function(job) {
    return About.jobs[job.id] = job;
  },
  jobulate: function() {
    var apply, content, el, id, job, jobsEl, ref, results;
    jobsEl = $('.jobs');
    ref = About.jobs;
    results = [];
    for (id in ref) {
      job = ref[id];
      el = $("<div class='job off'><div class='title'>" + job.title + "</div><div class='content'></div></div>");
      content = el.find('.content');
      content.html($('<div/>').html(job.content).text());
      apply = $("<a href='" + job.absolute_url + "' target='_new' class='apply'>Apply Now</a>");
      content.append(apply);
      results.push(jobsEl.append(el));
    }
    return results;
  }
};

//# sourceMappingURL=data:application/json;base64,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QVksR0FBRyxDQUFDLFlBQWhCLEdBQTZCLDZDQUEvQjtNQUNSLE9BQU8sQ0FBQyxNQUFSLENBQWUsS0FBZjttQkFDQSxNQUFNLENBQUMsTUFBUCxDQUFjLEVBQWQ7QUFORjs7RUFIUSxDQTdNViIsImZpbGUiOiJhYm91dC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIkFib3V0ID1cbiAgam9iczogZmFsc2VcbiAgaHNicGRJbnRlcnZhbDogZmFsc2VcbiAgaHNicGRTZWN0aW9uOiAnaG9saXN0aWMnXG4gIGNhY2hlOiB7fVxuXG4gIGk6IC0+XG5cbiAgICBfLm9mZiAnLm9yYml0J1xuXG4gICAgQWJvdXQuY2FjaGUuaHNicGQgPSAkKCcuaHNicGQnKVxuICAgIEFib3V0LmNhY2hlLmJsb2NrcyA9ICQoJy5ibG9ja3MnKVxuICAgIEFib3V0LmNhY2hlLmJsb2Nrc3AgPSAkKCcuYmxvY2tzcCcpXG5cbiAgICBBYm91dC5oYW5kbGVycygpXG5cbiAgICBpZiBsb2NhdGlvbi5oYXNoIGlzbnQgXCJcIlxuICAgICAgQWJvdXQubWVudSBsb2NhdGlvbi5oYXNoLnJlcGxhY2UoJyMnLCcnKVxuXG4gIGhhbmRsZXJzOiAtPlxuXG4gICAgaWYgJCh3aW5kb3cpLndpZHRoKCkgPiAxMDAwXG4gICAgICAkKCcuaHNicGQgPiAuZG90cyA+IC5kb3QnKS5vbiAnY2xpY2snLCBBYm91dC5oc2JwZEhhbmRsZXJcblxuICAgICQoJy5jYXBjZW50ZXIgPiAuY2FwbWVudSA+IC5jYXAnKS5vbiAnY2xpY2snLCBBYm91dC5jYXBjZW50ZXJcbiAgICAkKCcuZml2ZWQgPiAuZml2ZWRtZW51ID4gLml0ZW0nKS5vbiAnY2xpY2snLCBBYm91dC5maXZlZFxuXG4gICAgJCgnLmFib3V0ID4gLmZjb250YWluZXIgPiAuZmlsdGVycyA+IC5pbm5lciA+IC5maWx0ZXJtZW51ID4gLmZpbHRlciwgLmluZm8uZW1haWxzID4gYS5wJykub24gJ2NsaWNrJywgQWJvdXQubWVudUhhbmRsZXJcbiAgICAkKCcuYWJvdXQgPiAuc2VjdGlvbnMgPiAuc2VjdGlvbl9jYXJlZXJzJykub24gJ2NsaWNrJywgJy5qb2JzID4gLmpvYicsIEFib3V0LmpvYkhhbmRsZXJcblxuICAgIGlmICQod2luZG93KS53aWR0aCgpID4gMTAwMFxuICAgICAgQWJvdXQuaHNicGRJbnRlcnZhbCA9IHNldEludGVydmFsIC0+XG4gICAgICAgIEFib3V0LmhzYnBkQ2hlY2soKVxuICAgICAgLCAxMFxuXG4gICAgJCgnLnByb2ZpbGVzID4gLnByb2ZpbGUnKS5vbiAnY2xpY2snLCBBYm91dC5wcm9maWxlXG4gICAgJCgnLmJpb3MgPiAuYmlvID4gLmNsb3NlLCAuYmlvcyA+IC5iaW8nKS5vbiAnY2xpY2snLCBBYm91dC5wcm9maWxlQ2xvc2VcblxuICBwcm9maWxlOiAtPlxuXG4gICAgdCA9ICQgdGhpc1xuICAgIHByb2ZpbGUgPSB0LmRhdGEgJ3Byb2ZpbGUnXG4gICAgcmVjdCA9IHRbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICBwb3MgPSB0LnBvc2l0aW9uKClcbiAgICB3aWR0aCA9ICQod2luZG93KS5pbm5lcldpZHRoKClcblxuICAgIEFib3V0LnByb2ZpbGVDbG9zZSgpXG4gICAgXy5vbiAkKCcuYmlvcycpXG4gICAgXy5vbiB0XG4gICAgYmlvID0gJChcIi5iaW9zID4gLmJpby5iaW9fI3twcm9maWxlfVwiKVxuXG4gICAgYmlvLmNzcygnaGVpZ2h0JywgXCIje3JlY3QuaGVpZ2h0fXB4XCIpXG4gICAgYmlvLmNzcygndG9wJywgXCIje3Bvcy50b3AgKyByZWN0LmhlaWdodH1weFwiKVxuXG4gICAgYmlvLmNzcygnbGVmdCcsIDApXG4gICAgYmlvLmNzcygncmlnaHQnLCAwKVxuICAgIGJpby5jc3MoJ3dpZHRoJywgJzEwMCUnKVxuXG4gICAgaWYgd2lkdGggPiAocmVjdC53aWR0aCoyKVxuXG4gICAgICBpZiB3aWR0aCBpcyBNYXRoLnJvdW5kKHJlY3QucmlnaHQpXG4gICAgICAgIGJpby5jc3MoJ3dpZHRoJywgXCIje3JlY3Qud2lkdGgqMn1weFwiKVxuICAgICAgICBiaW8uY3NzKCdyaWdodCcsIFwiMHB4XCIpXG4gICAgICAgIGJpby5jc3MoJ2xlZnQnLCBcImF1dG9cIilcbiAgICAgIGVsc2UgaWYgcmVjdC5sZWZ0IGlzIDBcbiAgICAgICAgYmlvLmNzcygnd2lkdGgnLCBcIiN7cmVjdC53aWR0aCoyfXB4XCIpXG4gICAgICAgIGJpby5jc3MoJ2xlZnQnLCBcIjBweFwiKVxuICAgICAgICBiaW8uY3NzKCdyaWdodCcsIFwiYXV0b1wiKVxuICAgICAgZWxzZVxuICAgICAgICBiaW8uY3NzKCd3aWR0aCcsIFwiI3tyZWN0LndpZHRoKjJ9cHhcIilcbiAgICAgICAgYmlvLmNzcygnbGVmdCcsIFwiI3twb3MubGVmdH1weFwiKVxuICAgICAgICBiaW8uY3NzKCdyaWdodCcsIFwiYXV0b1wiKVxuXG4gICAgaWYgJCh3aW5kb3cpLndpZHRoKCkgPCAxMDAwXG4gICAgICBiaW8uY3NzKCdoZWlnaHQnLCBcImF1dG9cIilcblxuICAgIF8ub24gYmlvXG5cbiAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZShcbiAgICAgIHNjcm9sbFRvcDogdC5vZmZzZXQoKS50b3AgLSA2NFxuICAgICwgMjAwKVxuXG4gIHByb2ZpbGVDbG9zZTogLT5cblxuICAgIF8ub2ZmICQoJy5iaW9zJylcbiAgICBfLm9mZiAkKCcuYmlvcyA+IC5iaW8nKVxuICAgIF8ub2ZmICQoJy5wcm9maWxlcyA+IC5wcm9maWxlJylcblxuICBtZW51SGFuZGxlcjogLT5cbiAgICBzZWN0aW9uID0gJCh0aGlzKS5kYXRhICdmaWx0ZXInXG4gICAgQWJvdXQubWVudSBzZWN0aW9uXG5cbiAgbWVudTogKHNlY3Rpb24pIC0+XG5cbiAgICBsb2NhdGlvbi5oYXNoID0gc2VjdGlvblxuXG4gICAgaWYgc2VjdGlvbiBpcyAnY2FyZWVycycgYW5kIEFib3V0LmpvYnMgaXMgZmFsc2VcbiAgICAgIExvYWRlci5sb2FkICdodHRwczovL2FwaS5ncmVlbmhvdXNlLmlvL3YxL2JvYXJkcy9hc3Ryb3N0dWRpb3MvZW1iZWQvam9icz9jYWxsYmFjaz1BYm91dC5qb2JsaXN0J1xuXG5cbiAgICBfLm9mZiAnLmFib3V0ID4gLmZjb250YWluZXIgPiAuZmlsdGVycyA+IC5pbm5lciA+IC5maWx0ZXJtZW51ID4gLmZpbHRlcicsICcuc2VjdGlvbnMgPiAuc2VjdGlvbidcbiAgICBfLm9uIFwiLmZjb250YWluZXIgPiAuZmlsdGVycyA+IC5pbm5lciA+IC5maWx0ZXJtZW51ID4gLmZpbHRlci5maWx0ZXJfI3tzZWN0aW9ufVwiLFxuICAgICAgXCIuc2VjdGlvbnMgPiAuc2VjdGlvbi5zZWN0aW9uXyN7c2VjdGlvbn1cIlxuXG4gICAgaWYgJCh3aW5kb3cpLndpZHRoKCkgPiAxMDAwXG4gICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZShcbiAgICAgICAgc2Nyb2xsVG9wOiAkKFwiLnNlY3Rpb25zXCIpLm9mZnNldCgpLnRvcCAtIDYwXG4gICAgICAsIDEwMDApXG4gICAgZWxzZVxuICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoXG4gICAgICAgIHNjcm9sbFRvcDogJChcIi5zZWN0aW9uc1wiKS5vZmZzZXQoKS50b3AgLSAzMjJcbiAgICAgICwgMzAwKVxuXG4gIGhzYnBkQ2hlY2s6IC0+XG5cbiAgICBzdCA9ICQod2luZG93KS5zY3JvbGxUb3AoKVxuXG4gICAgdG9wID0gMTM4NlxuICAgIHRocmVzaG9sZCA9IDYzMVxuXG4gICAgaWYgc3QgPj0gdG9wIGFuZCAhQWJvdXQuY2FjaGUuaHNicGQuaGFzQ2xhc3MgJ2ZpeGVkJ1xuICAgICAgQWJvdXQuY2FjaGUuaHNicGQuYWRkQ2xhc3MoJ2ZpeGVkJykucmVtb3ZlQ2xhc3MgJ2JvdHRvbSdcbiAgICAgIEFib3V0LmNhY2hlLmJsb2Nrcy5hZGRDbGFzcygnZml4ZWQnKVxuICAgICAgQWJvdXQuY2FjaGUuYmxvY2tzcC5yZW1vdmVDbGFzcygnb2ZmJykuYWRkQ2xhc3MoJ29uJylcbiAgICBpZiBzdCA8IHRvcCBhbmQgQWJvdXQuY2FjaGUuaHNicGQuaGFzQ2xhc3MgJ2ZpeGVkJ1xuICAgICAgQWJvdXQuY2FjaGUuaHNicGQucmVtb3ZlQ2xhc3MoJ2ZpeGVkJykucmVtb3ZlQ2xhc3MgJ2JvdHRvbSdcbiAgICAgIEFib3V0LmNhY2hlLmJsb2Nrcy5yZW1vdmVDbGFzcygnZml4ZWQnKVxuICAgICAgQWJvdXQuY2FjaGUuYmxvY2tzcC5yZW1vdmVDbGFzcygnb24nKS5hZGRDbGFzcygnb2ZmJylcbiAgICBpZiBzdCA+PSAodG9wICsgKHRocmVzaG9sZCo1KSlcbiAgICAgIEFib3V0LmNhY2hlLmhzYnBkLnJlbW92ZUNsYXNzKCdmaXhlZCcpLmFkZENsYXNzICdib3R0b20nXG5cbiAgICBpZiBzdCA8IHRvcFxuICAgICAgcmV0dXJuIHRydWVcblxuICAgIHNlY3Rpb25zID0gWydob2xpc3RpYycsJ3N0cmF0ZWd5JywnYnJhbmQnLCdwcm9kdWN0JywnZGlnaXRhbCddXG4gICAgZm9yIHNlY3Rpb24sIGkgaW4gc2VjdGlvbnNcbiAgICAgIHQgPSB0b3AgKyAoIChpKzApICogdGhyZXNob2xkIClcbiAgICAgIGIgPSB0b3AgKyAoIChpKzEpICogdGhyZXNob2xkIClcblxuICAgICAgaWYgc3QgPiB0IGFuZCBzdCA8IGIgYW5kIEFib3V0LmhzYnBkU2VjdGlvbiBpc250IHNlY3Rpb25cbiAgICAgICAgQWJvdXQuaHNicGQgc2VjdGlvblxuXG4gIGhzYnBkSGFuZGxlcjogLT5cbiAgICBzZWN0aW9uID0gJCh0aGlzKS5kYXRhICdzZWN0aW9uJ1xuICAgIEFib3V0LmhzYnBkIHNlY3Rpb25cblxuICBoc2JwZDogKHNlY3Rpb24pIC0+XG5cbiAgICBBYm91dC5oc2JwZFNlY3Rpb24gPSBzZWN0aW9uXG5cbiAgICAkKCcuaHNicGQgPiAuc2xpZGUub24nKS5hZGRDbGFzcygnb2ZmaW5nJykucmVtb3ZlQ2xhc3MoJ29uJylcblxuICAgIF8ub24gXCIuaHNicGQgPiAuc2xpZGUuc2xpZGVfI3tzZWN0aW9uWzBdfVwiXG5cbiAgICBzZXRUaW1lb3V0IC0+XG4gICAgICBfLm9mZiAnLmhzYnBkID4gLnNsaWRlLm9mZmluZydcbiAgICAgICQoJy5oc2JwZCA+IC5zbGlkZS5vZmZpbmcnKS5yZW1vdmVDbGFzcygnb2ZmaW5nJylcbiAgICAsIDMwMDBcblxuICAgIF8ub2ZmICcuaHNicGQgPiAuZG90cyA+IC5kb3QnXG4gICAgXy5vbiBcIi5oc2JwZCA+IC5kb3RzID4gLmRvdF8je3NlY3Rpb259XCJcblxuICBjYXBjZW50ZXI6IC0+XG5cbiAgICBjYXAgPSAkKHRoaXMpLmh0bWwoKS50cmltKClcbiAgICBfLm9mZiAnLmNhcGNlbnRlciA+IC5jYXBtZW51ID4gLmNhcCcsICcuY2FwY2VudGVyID4gLmRlc2NzID4gLmRlc2MnXG4gICAgXy5vbiB0aGlzLCBcIi5jYXBjZW50ZXIgPiAuZGVzY3MgPiAuZGVzY18je2NhcH1cIlxuXG4gIGZpdmVkOiAtPlxuXG4gICAgaXRlbSA9ICQodGhpcykuZmluZCgnLmNvcHkgPiAubmFtZScpLmh0bWwoKS50cmltKClcbiAgICBfLm9mZiAnLmZpdmVkID4gLmZpdmVkbWVudSA+IC5pdGVtJywgJy5maXZlZCA+IC5ib2R5cyA+IC5ib2R5J1xuICAgIF8ub24gdGhpcywgXCIuZml2ZWQgPiAuYm9keXMgPiAuYm9keV8je2l0ZW19XCJcblxuXG4gIGpvYkhhbmRsZXI6IC0+XG5cbiAgICB0ID0gJCB0aGlzXG5cbiAgICBpZiB0Lmhhc0NsYXNzICdvbidcbiAgICAgIHJldHVybiBfLm9mZiB0XG5cbiAgICBfLm9mZiAnLmFib3V0ID4gLnNlY3Rpb25zID4gLnNlY3Rpb25fY2FyZWVycyA+IC5qb2JzID4gLmpvYidcbiAgICBfLm9uIHRoaXNcblxuICBqb2JsaXN0OiAoZGF0YSkgLT5cblxuICAgIEFib3V0LmpvYnMgPSB7fVxuXG4gICAgdG90YWwgPSBPYmplY3Qua2V5cyhkYXRhLmpvYnMpLmxlbmd0aFxuICAgIGNvdW50ID0gMFxuXG4gICAgZm9yIGpvYiBpbiBkYXRhLmpvYnNcbiAgICAgICQuYWpheFxuICAgICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkuZ3JlZW5ob3VzZS5pby92MS9ib2FyZHMvYXN0cm9zdHVkaW9zL2VtYmVkL2pvYj9pZD0je2pvYi5pZH0/Y2FsbGJhY2s9QWJvdXQuam9iXCJcbiAgICAgICAgdHlwZTogJ0dFVCdcbiAgICAgICAgZGF0YVR5cGU6ICdqc29ucCdcbiAgICAgICAgY3Jvc3NEb21haW46IHRydWVcbiAgICAgICAganNvbnBDYWxsYmFjazogJ0Fib3V0LmpvYidcbiAgICAgICAgY29tcGxldGU6IChyZXNwb25zZSkgLT5cbiAgICAgICAgICBjb3VudCsrXG4gICAgICAgICAgQWJvdXQuam9idWxhdGUoKSBpZiBjb3VudCBpcyB0b3RhbFxuXG4gIGpvYjogKGpvYikgLT5cbiAgICBBYm91dC5qb2JzW2pvYi5pZF0gPSBqb2JcblxuICBqb2J1bGF0ZTogLT5cbiAgICBqb2JzRWwgPSAkICcuam9icydcblxuICAgIGZvciBpZCwgam9iIG9mIEFib3V0LmpvYnNcbiAgICAgIGVsID0gJChcIjxkaXYgY2xhc3M9J2pvYiBvZmYnPjxkaXYgY2xhc3M9J3RpdGxlJz4je2pvYi50aXRsZX08L2Rpdj48ZGl2IGNsYXNzPSdjb250ZW50Jz48L2Rpdj48L2Rpdj5cIilcbiAgICAgIGNvbnRlbnQgPSBlbC5maW5kICcuY29udGVudCdcbiAgICAgIGNvbnRlbnQuaHRtbCAkKCc8ZGl2Lz4nKS5odG1sKGpvYi5jb250ZW50KS50ZXh0KClcbiAgICAgIGFwcGx5ID0gJChcIjxhIGhyZWY9JyN7am9iLmFic29sdXRlX3VybH0nIHRhcmdldD0nX25ldycgY2xhc3M9J2FwcGx5Jz5BcHBseSBOb3c8L2E+XCIpXG4gICAgICBjb250ZW50LmFwcGVuZCBhcHBseVxuICAgICAgam9ic0VsLmFwcGVuZCBlbFxuXG5cblxuIl19
