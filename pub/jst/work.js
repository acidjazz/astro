var Work;

Work = {
  hash: false,
  cproject: false,
  i: function() {
    var project;
    if (Object.keys(projects).indexOf(location.hash.replace('#', '')) !== -1) {
      project = location.hash.replace('#', '');
      Work.cproject = project;
      Work.load(project);
    } else {
      Work.summary();
    }
    document.body.scrollTop = document.documentElement.scrollTop = 0;
    return Work.handlers();
  },
  handlers: function() {
    $('.projects > .summary > .thumbs > .thumb, .related > .inner > .relateds > .thumb').on('click', Work.projectHandler);
    $('.project .filters > .inner > .filtermenu > .filter').on('click', Work.filterHandler);
    $('.summary .filters > .inner > .filtermenu > .filter').on('click', Work.summaryFilterHandler);
    return $(window).on('popstate', Work.pop);
  },
  pop: function(e) {
    var project;
    document.body.scrollTop = document.documentElement.scrollTop = 0;
    if (Object.keys(projects).indexOf(location.hash.replace('#', '')) !== -1) {
      project = location.hash.replace('#', '');
      Work.cproject = project;
      return Work.load(project);
    } else {
      Work.summary();
      _.on('.summary > .thumbs > .thumb');
      _.off('.summary > .filters > .inner > .filtermenu > .filter');
      return _.on('.summary > .filters > .inner > .filtermenu > .filter_all');
    }
  },
  summaryFilterHandler: function() {
    var copy, filter;
    _.off('.summary .filters > .inner > .filtermenu > .filter');
    _.on(this);
    filter = $(this).text().trim();
    copy = $(this).data('copy');
    $('.summary > .hero > .copy2').text(copy);
    if (filter === 'all') {
      _.on('.summary > .thumbs > .thumb');
      return true;
    }
    _.off('.summary > .thumbs > .thumb');
    return setTimeout(function() {
      return $('.summary > .thumbs > .thumb').each(function(i, el) {
        var filters;
        filters = $(el).data('filters');
        if (filters.indexOf(filter) !== -1) {
          return _.on($(el));
        } else {
          return _.off($(el));
        }
      });
    }, 200);
  },
  filterHandler: function() {
    var t;
    t = $(this);
    return $('html, body').animate({
      scrollTop: $(".filter_mark.filter_" + (t.html())).offset().top
    }, 500);
  },
  projectHandler: function() {
    var project;
    project = $(this).data('project');
    history.pushState(null, null, "/work/#" + project);
    console.log(history);
    document.body.scrollTop = document.documentElement.scrollTop = 0;
    return Work.load(project);
  },
  summary: function() {
    var srcs;
    location.hash = '';
    $('.orbit').removeClass(function(index, css) {
      return (css.match(/\borbit_\S+/g) || []).join(' ');
    });
    $('#nprogress .bar').removeClass(function(index, css) {
      return (css.match(/\bbar__\S+/g) || []).join(' ');
    });
    _.off('.project');
    _.on('.orbit');
    NProgress.start();
    srcs = [];
    $('.summary > .thumbs > .thumb > .inner').each(function(i, el) {
      return srcs.push(Global.srcFromStyle($(el)));
    });
    return Global.preload(srcs, function(progress) {
      return NProgress.set(progress);
    }, function(complete) {
      NProgress.done();
      _.off('.orbit');
      return _.on('.summary');
    });
  },
  load: function(project) {
    var srcs;
    _.off('.project, .summary');
    $('.orbit').addClass("orbit_" + project);
    $('#nprogress .bar').addClass("bar_" + project);
    _.on('.orbit');
    NProgress.start();
    $('#nprogress .bar').addClass("bar_" + project);
    srcs = Work.srcs(project);
    document.body.scrollTop = document.documentElement.scrollTop = 0;
    return Global.preload(srcs, function(progress) {
      return NProgress.set(progress);
    }, function(complete) {
      NProgress.done();
      _.off('.orbit');
      $(".project img").attr('src', '');
      $(".project_" + project + " img").each(function(i, v) {
        return $(v).attr('src', "/img/work/" + project + "/1440/" + ($(v).data('src')));
      });
      _.on(".project_" + project);
      $('.orbit').removeClass(function(index, css) {
        return (css.match(/\borbit_\S+/g) || []).join(' ');
      });
      return $('#nprogress .bar').removeClass(function(index, css) {
        return (css.match(/\bbar__\S+/g) || []).join(' ');
      });
    });
  },
  srcs: function(project) {
    var srcs;
    srcs = [Global.srcFromStyle($(".project_" + project + " > .cover"))];
    $(".project_" + project + " img").each(function(i, v) {
      return srcs.push("/img/work/" + project + "/1440/" + ($(v).data('src')));
    });
    console.log(srcs);
    return srcs;
  }
};

//# sourceMappingURL=data:application/json;base64,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QTZCLEVBQTlCLENBQWlDLENBQUMsSUFBbEMsQ0FBdUMsR0FBdkM7TUFEc0IsQ0FBeEI7YUFFQSxDQUFBLENBQUUsaUJBQUYsQ0FBb0IsQ0FBQyxXQUFyQixDQUFpQyxTQUFDLEtBQUQsRUFBUSxHQUFSO2VBQy9CLENBQUMsR0FBRyxDQUFDLEtBQUosQ0FBVSxhQUFWLENBQUEsSUFBNEIsRUFBN0IsQ0FBZ0MsQ0FBQyxJQUFqQyxDQUFzQyxHQUF0QztNQUQrQixDQUFqQztJQVpBLENBSEo7RUFkSSxDQTVHTjtFQTRJQSxJQUFBLEVBQU0sU0FBQyxPQUFEO0FBRUosUUFBQTtJQUFBLElBQUEsR0FBTyxDQUFDLE1BQU0sQ0FBQyxZQUFQLENBQW9CLENBQUEsQ0FBRSxXQUFBLEdBQVksT0FBWixHQUFvQixXQUF0QixDQUFwQixDQUFEO0lBRVAsQ0FBQSxDQUFFLFdBQUEsR0FBWSxPQUFaLEdBQW9CLE1BQXRCLENBQTRCLENBQUMsSUFBN0IsQ0FBa0MsU0FBQyxDQUFELEVBQUksQ0FBSjthQUNoQyxJQUFJLENBQUMsSUFBTCxDQUFVLFlBQUEsR0FBYSxPQUFiLEdBQXFCLFFBQXJCLEdBQTRCLENBQUMsQ0FBQSxDQUFFLENBQUYsQ0FBSSxDQUFDLElBQUwsQ0FBVSxLQUFWLENBQUQsQ0FBdEM7SUFEZ0MsQ0FBbEM7SUFHQSxPQUFPLENBQUMsR0FBUixDQUFZLElBQVo7QUFDQSxXQUFPO0VBUkgsQ0E1SU4iLCJmaWxlIjoid29yay5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIlxuV29yayA9XG4gIGhhc2g6IGZhbHNlXG4gIGNwcm9qZWN0OiBmYWxzZVxuXG4gIGk6IC0+XG5cbiAgICBpZiBPYmplY3Qua2V5cyhwcm9qZWN0cykuaW5kZXhPZihsb2NhdGlvbi5oYXNoLnJlcGxhY2UoJyMnLCcnKSkgaXNudCAtMVxuICAgICAgcHJvamVjdCA9IGxvY2F0aW9uLmhhc2gucmVwbGFjZSAnIycsICcnXG4gICAgICBXb3JrLmNwcm9qZWN0ID0gcHJvamVjdFxuICAgICAgV29yay5sb2FkIHByb2plY3RcbiAgICBlbHNlXG4gICAgICBXb3JrLnN1bW1hcnkoKVxuXG4gICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID0gMFxuXG4gICAgV29yay5oYW5kbGVycygpXG5cbiAgaGFuZGxlcnM6IC0+XG5cbiAgICAkKCcucHJvamVjdHMgPiAuc3VtbWFyeSA+IC50aHVtYnMgPiAudGh1bWIsIC5yZWxhdGVkID4gLmlubmVyID4gLnJlbGF0ZWRzID4gLnRodW1iJykub24gJ2NsaWNrJywgV29yay5wcm9qZWN0SGFuZGxlclxuICAgICQoJy5wcm9qZWN0IC5maWx0ZXJzID4gLmlubmVyID4gLmZpbHRlcm1lbnUgPiAuZmlsdGVyJykub24gJ2NsaWNrJywgV29yay5maWx0ZXJIYW5kbGVyXG5cbiAgICAkKCcuc3VtbWFyeSAuZmlsdGVycyA+IC5pbm5lciA+IC5maWx0ZXJtZW51ID4gLmZpbHRlcicpLm9uICdjbGljaycsIFdvcmsuc3VtbWFyeUZpbHRlckhhbmRsZXJcbiAgICAkKHdpbmRvdykub24gJ3BvcHN0YXRlJywgV29yay5wb3BcblxuXG4gIHBvcDogKGUpIC0+XG5cbiAgICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSAwXG5cbiAgICBpZiBPYmplY3Qua2V5cyhwcm9qZWN0cykuaW5kZXhPZihsb2NhdGlvbi5oYXNoLnJlcGxhY2UoJyMnLCcnKSkgaXNudCAtMVxuICAgICAgcHJvamVjdCA9IGxvY2F0aW9uLmhhc2gucmVwbGFjZSAnIycsICcnXG4gICAgICBXb3JrLmNwcm9qZWN0ID0gcHJvamVjdFxuICAgICAgV29yay5sb2FkIHByb2plY3RcbiAgICBlbHNlXG4gICAgICBXb3JrLnN1bW1hcnkoKVxuICAgICAgXy5vbiAnLnN1bW1hcnkgPiAudGh1bWJzID4gLnRodW1iJ1xuICAgICAgXy5vZmYgJy5zdW1tYXJ5ID4gLmZpbHRlcnMgPiAuaW5uZXIgPiAuZmlsdGVybWVudSA+IC5maWx0ZXInXG4gICAgICBfLm9uICcuc3VtbWFyeSA+IC5maWx0ZXJzID4gLmlubmVyID4gLmZpbHRlcm1lbnUgPiAuZmlsdGVyX2FsbCdcblxuICBzdW1tYXJ5RmlsdGVySGFuZGxlcjogLT5cblxuICAgICNkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSAwXG5cbiAgICBfLm9mZiAnLnN1bW1hcnkgLmZpbHRlcnMgPiAuaW5uZXIgPiAuZmlsdGVybWVudSA+IC5maWx0ZXInXG4gICAgXy5vbiB0aGlzXG5cbiAgICBmaWx0ZXIgPSAkKHRoaXMpLnRleHQoKS50cmltKClcbiAgICBjb3B5ID0gJCh0aGlzKS5kYXRhICdjb3B5J1xuXG4gICAgJCgnLnN1bW1hcnkgPiAuaGVybyA+IC5jb3B5MicpLnRleHQgY29weVxuICAgICMkKCcuc3VtbWFyeSA+IC5oZXJvID4gLmNvcHkxJykudGV4dCBmaWx0ZXJcblxuICAgIGlmIGZpbHRlciBpcyAnYWxsJ1xuICAgICAgXy5vbiAnLnN1bW1hcnkgPiAudGh1bWJzID4gLnRodW1iJ1xuICAgICAgcmV0dXJuIHRydWVcblxuXG4gICAgXy5vZmYgJy5zdW1tYXJ5ID4gLnRodW1icyA+IC50aHVtYidcbiAgICBzZXRUaW1lb3V0IC0+XG4gICAgICAkKCcuc3VtbWFyeSA+IC50aHVtYnMgPiAudGh1bWInKS5lYWNoIChpLCBlbCkgLT5cbiAgICAgICAgZmlsdGVycyA9ICQoZWwpLmRhdGEgJ2ZpbHRlcnMnXG4gICAgICAgIGlmIGZpbHRlcnMuaW5kZXhPZihmaWx0ZXIpIGlzbnQgLTFcbiAgICAgICAgICBfLm9uICQoZWwpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICBfLm9mZiAkKGVsKVxuICAgICwgMjAwXG5cblxuICBmaWx0ZXJIYW5kbGVyOiAtPlxuICAgIHQgPSAkIHRoaXNcbiAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZShcbiAgICAgIHNjcm9sbFRvcDogJChcIi5maWx0ZXJfbWFyay5maWx0ZXJfI3t0Lmh0bWwoKX1cIikub2Zmc2V0KCkudG9wXG4gICAgLCA1MDApXG5cbiAgcHJvamVjdEhhbmRsZXI6IC0+XG5cbiAgICBwcm9qZWN0ID0gJCh0aGlzKS5kYXRhICdwcm9qZWN0J1xuICAgIGhpc3RvcnkucHVzaFN0YXRlIG51bGwsIG51bGwsIFwiL3dvcmsvIyN7cHJvamVjdH1cIlxuICAgIGNvbnNvbGUubG9nIGhpc3RvcnlcblxuICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA9IDBcbiAgICBXb3JrLmxvYWQgcHJvamVjdFxuXG4gIHN1bW1hcnk6ICgpIC0+XG4gICAgbG9jYXRpb24uaGFzaCA9ICcnXG5cbiAgICAkKCcub3JiaXQnKS5yZW1vdmVDbGFzcyAoaW5kZXgsIGNzcykgLT5cbiAgICAgIChjc3MubWF0Y2goL1xcYm9yYml0X1xcUysvZykgb3IgW10pLmpvaW4gJyAnXG4gICAgJCgnI25wcm9ncmVzcyAuYmFyJykucmVtb3ZlQ2xhc3MgKGluZGV4LCBjc3MpIC0+XG4gICAgICAoY3NzLm1hdGNoKC9cXGJiYXJfX1xcUysvZykgb3IgW10pLmpvaW4gJyAnXG5cbiAgICBfLm9mZiAnLnByb2plY3QnXG4gICAgXy5vbiAnLm9yYml0J1xuICAgIE5Qcm9ncmVzcy5zdGFydCgpXG5cbiAgICBzcmNzID0gW11cblxuICAgICQoJy5zdW1tYXJ5ID4gLnRodW1icyA+IC50aHVtYiA+IC5pbm5lcicpLmVhY2ggKGksIGVsKSAtPlxuICAgICAgc3Jjcy5wdXNoKEdsb2JhbC5zcmNGcm9tU3R5bGUoJChlbCkpKVxuXG4gICAgR2xvYmFsLnByZWxvYWQgc3JjcyxcbiAgICAgIChwcm9ncmVzcykgLT5cbiAgICAgICAgTlByb2dyZXNzLnNldCBwcm9ncmVzc1xuICAgICAgLCAoY29tcGxldGUpIC0+XG4gICAgICAgIE5Qcm9ncmVzcy5kb25lKClcbiAgICAgICAgXy5vZmYgJy5vcmJpdCdcbiAgICAgICAgXy5vbiAnLnN1bW1hcnknXG5cbiAgbG9hZDogKHByb2plY3QpIC0+XG4gICAgXy5vZmYgJy5wcm9qZWN0LCAuc3VtbWFyeSdcblxuICAgICQoJy5vcmJpdCcpLmFkZENsYXNzIFwib3JiaXRfI3twcm9qZWN0fVwiXG4gICAgJCgnI25wcm9ncmVzcyAuYmFyJykuYWRkQ2xhc3MgXCJiYXJfI3twcm9qZWN0fVwiXG5cbiAgICBfLm9uICcub3JiaXQnXG5cbiAgICBOUHJvZ3Jlc3Muc3RhcnQoKVxuICAgICQoJyNucHJvZ3Jlc3MgLmJhcicpLmFkZENsYXNzIFwiYmFyXyN7cHJvamVjdH1cIlxuICAgIHNyY3MgPSBXb3JrLnNyY3MgcHJvamVjdFxuXG4gICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID0gMFxuXG4gICAgR2xvYmFsLnByZWxvYWQgc3JjcyxcbiAgICAgIChwcm9ncmVzcykgLT5cbiAgICAgICAgTlByb2dyZXNzLnNldCBwcm9ncmVzc1xuICAgICAgLCAoY29tcGxldGUpIC0+XG4gICAgICAgIE5Qcm9ncmVzcy5kb25lKClcbiAgICAgICAgXy5vZmYgJy5vcmJpdCdcbiAgICAgICAgJChcIi5wcm9qZWN0IGltZ1wiKS5hdHRyICdzcmMnLCAnJ1xuXG4gICAgICAgICQoXCIucHJvamVjdF8je3Byb2plY3R9IGltZ1wiKS5lYWNoIChpLCB2KSAtPlxuICAgICAgICAgICQodikuYXR0ciAnc3JjJywgXCIvaW1nL3dvcmsvI3twcm9qZWN0fS8xNDQwLyN7JCh2KS5kYXRhKCdzcmMnKX1cIlxuXG4gICAgICAgIF8ub24gXCIucHJvamVjdF8je3Byb2plY3R9XCJcblxuICAgICAgICAkKCcub3JiaXQnKS5yZW1vdmVDbGFzcyAoaW5kZXgsIGNzcykgLT5cbiAgICAgICAgICAoY3NzLm1hdGNoKC9cXGJvcmJpdF9cXFMrL2cpIG9yIFtdKS5qb2luICcgJ1xuICAgICAgICAkKCcjbnByb2dyZXNzIC5iYXInKS5yZW1vdmVDbGFzcyAoaW5kZXgsIGNzcykgLT5cbiAgICAgICAgICAoY3NzLm1hdGNoKC9cXGJiYXJfX1xcUysvZykgb3IgW10pLmpvaW4gJyAnXG5cbiAgc3JjczogKHByb2plY3QpIC0+XG5cbiAgICBzcmNzID0gW0dsb2JhbC5zcmNGcm9tU3R5bGUoJChcIi5wcm9qZWN0XyN7cHJvamVjdH0gPiAuY292ZXJcIikpXVxuXG4gICAgJChcIi5wcm9qZWN0XyN7cHJvamVjdH0gaW1nXCIpLmVhY2ggKGksIHYpIC0+XG4gICAgICBzcmNzLnB1c2ggXCIvaW1nL3dvcmsvI3twcm9qZWN0fS8xNDQwLyN7JCh2KS5kYXRhKCdzcmMnKX1cIlxuXG4gICAgY29uc29sZS5sb2cgc3Jjc1xuICAgIHJldHVybiBzcmNzXG5cblxuIl19
